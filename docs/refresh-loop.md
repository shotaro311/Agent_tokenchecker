---
summary: "更新間隔、バックグラウンド更新、エラーハンドリング。"
read_when:
  - 更新間隔/バックグラウンドタスク/更新トリガーを変更するとき
  - 更新タイミングや古いデータ挙動を調査するとき
---

# 更新ループ

## 間隔
- `RefreshFrequency`: 手動、1分、2分、5分（既定）、15分。
- `SettingsStore` 経由で `UserDefaults` に保存。

## 挙動
- バックグラウンド更新はメインスレッド外で実行され、`UsageStore` を更新（使用量 + クレジット + 任意のWebスクレイプ）。
- メニューの「今すぐ更新」は常に利用可能。
- 古い/エラー状態ではアイコンが暗くなり、メニュー内に状態を表示。

## 将来の任意候補
- ログが無い場合の自動シード: `codex exec --skip-git-repo-check --json "ping"`（現状は未実行）。

関連: `docs/status.md`, `docs/ui.md`。
